import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "hotel_options": [\n    {\n      "hotel_name": "The D Las Vegas",\n      "hotel_address": "301 Fremont Street, Las Vegas, NV 89101",\n      "price": "$50 - $100 per night",\n      "hotel_image_url": "https://www.thed.com/media/images/hotel-exterior.jpg",\n      "geo_coordinates": "36.1699° N, 115.1420° W",\n      "rating": 4.0,\n      "description": "A centrally located, budget-friendly hotel on Fremont Street with a casino, restaurants, and a rooftop pool."\n    },\n    {\n      "hotel_name": "Circus Circus Hotel & Casino",\n      "hotel_address": "2880 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "price": "$40 - $80 per night",\n      "hotel_image_url": "https://www.circuscircus.com/content/dam/mgmresorts/circuscircus/en/images/hotel-tower.jpg",\n      "geo_coordinates": "36.1174° N, 115.1726° W",\n      "rating": 3.5,\n      "description": "A family-friendly hotel with a circus theme, a casino, amusement rides, and a large pool complex."\n    },\n    {\n      "hotel_name": "Golden Nugget Las Vegas",\n      "hotel_address": "129 E Fremont St, Las Vegas, NV 89101",\n      "price": "$60 - $120 per night",\n      "hotel_image_url": "https://www.goldennugget.com/images/home/hero/GN_Hero_Mobile.jpg",\n      "geo_coordinates": "36.1698° N, 115.1419° W",\n      "rating": 4.5,\n      "description": "A historic hotel on Fremont Street with a casino, a shark tank, and a variety of restaurants and bars."\n    },\n    {\n      "hotel_name": "The Strat Hotel, Casino & SkyPod",\n      "hotel_address": "2000 Las Vegas Blvd S, Las Vegas, NV 89104",\n      "price": "$50 - $100 per night",\n      "hotel_image_url": "https://www.thestrat.com/content/dam/mgmresorts/thestrat/en/images/hotel-tower.jpg",\n      "geo_coordinates": "36.1239° N, 115.1683° W",\n      "rating": 4.0,\n      "description": "A hotel with a focus on entertainment, including a casino, restaurants, bars, and an observation deck."\n    }\n  ],\n  "itinerary": [\n    {\n      "day": 1,\n      "plan": [\n        {\n          "place_name": "Fremont Street Experience",\n          "place_details": "A pedestrian-only street with a canopy of lights, live music, street performers, and a zipline.",\n          "place_image_url": "https://www.vegasexperience.com/media/images/freemont-street-experience-canopy.jpg",\n          "geo_coordinates": "36.1699° N, 115.1420° W",\n          "ticket_pricing": "Free",\n          "rating": 4.5,\n          "time": "Evening" \n        }\n      ],\n      "best_time_to_visit": "Evening"\n    },\n    {\n      "day": 2,\n      "plan": [\n        {\n          "place_name": "The Strip",\n          "place_details": "A famous boulevard with casinos, hotels, restaurants, and entertainment venues.",\n          "place_image_url": "https://www.visitlasvegas.com/media/images/hero/las-vegas-strip.jpg",\n          "geo_coordinates": "36.1148° N, 115.1725° W",\n          "ticket_pricing": "Free",\n          "rating": 5.0,\n          "time": "Daytime"\n        },\n        {\n          "place_name": "Bellagio Fountains",\n          "place_details": "A free water and light show held every 15 minutes in front of the Bellagio Hotel.",\n          "place_image_url": "https://www.bellagio.com/content/dam/mgmresorts/bellagio/en/images/hero/fountains-hero.jpg",\n          "geo_coordinates": "36.1142° N, 115.1725° W",\n          "ticket_pricing": "Free",\n          "rating": 4.8,\n          "time": "Evening"\n        }\n      ],\n      "best_time_to_visit": "Daytime and Evening"\n    },\n    {\n      "day": 3,\n      "plan": [\n        {\n          "place_name": "Hoover Dam",\n          "place_details": "A massive concrete dam and engineering marvel on the Colorado River.",\n          "place_image_url": "https://www.hooverdam.com/media/images/hoover-dam-exterior.jpg",\n          "geo_coordinates": "36.0045° N, 114.9985° W",\n          "ticket_pricing": "$30 per person",\n          "rating": 4.6,\n          "time": "Morning"\n        },\n        {\n          "place_name": "Red Rock Canyon National Conservation Area",\n          "place_details": "A scenic desert park with red rock formations, hiking trails, and scenic drives.",\n          "place_image_url": "https://www.nps.gov/redr/learn/nature/images/Red-Rock-Canyon-10.jpg",\n          "geo_coordinates": "36.0863° N, 115.2363° W",\n          "ticket_pricing": "$15 per vehicle",\n          "rating": 4.7,\n          "time": "Afternoon"\n        }\n      ],\n      "best_time_to_visit": "Morning and Afternoon"\n    }\n  ]\n}\n```\n\n**Hotel Options:**\n\n* **The D Las Vegas:** This hotel offers a great balance of affordability and location. You\'ll be right in the heart of the Fremont Street Experience, with easy access to casinos, restaurants, and entertainment.\n* **Circus Circus Hotel & Casino:** This hotel is a popular choice for families, thanks to its circus theme and amusement rides. It\'s also a good budget option, especially if you\'re looking for a large pool complex.\n* **Golden Nugget Las Vegas:** If you\'re interested in a historic hotel with a touch of luxury, Golden Nugget is a great option. It\'s known for its famous shark tank and vibrant atmosphere.\n* **The Strat Hotel, Casino & SkyPod:** This hotel offers a unique experience with its observation deck, restaurants, and entertainment venues. It\'s also a good choice for those seeking a budget-friendly option with a touch of excitement.\n\n**Itinerary:**\n\n**Day 1:**\n\n* **Evening:** Explore the Fremont Street Experience (Free)\n\n**Day 2:**\n\n* **Daytime:** Explore the Strip (Free)\n* **Evening:** See the Bellagio Fountains (Free)\n\n**Day 3:**\n\n* **Morning:** Visit Hoover Dam ($30 per person)\n* **Afternoon:** Explore Red Rock Canyon National Conservation Area ($15 per vehicle)\n\n**Tips for Saving Money:**\n\n* **Travel during the off-season:**  Prices are lower during the shoulder seasons (spring and fall).\n* **Look for discounts and deals:** Many hotels, attractions, and restaurants offer discounts for advance booking or online purchases.\n* **Pack your own food and drinks:** This can save you a significant amount of money on meals.\n* **Take advantage of free activities:** There are many free things to do in Las Vegas, such as walking the Strip, seeing the Bellagio Fountains, and exploring the Fremont Street Experience.\n* **Use public transportation:** The Las Vegas Monorail and other public transportation options are relatively inexpensive and convenient.\n* **Consider staying off the Strip:** Hotels off the Strip are typically more affordable than those on the Strip.\n* **Eat at buffets:** Buffets are a great way to get a lot of food for a reasonable price.\n* **Drink water:**  Las Vegas is a hot city, so be sure to stay hydrated by drinking plenty of water. \n\n**Note:** This is just a sample itinerary, and you can customize it to fit your interests and budget. Remember to book your hotel and attractions in advance, especially during peak season.',
        },
      ],
    },
  ],
});
